(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{36:function(e,t,a){e.exports=a(73)},42:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),l=a(12),c=a.n(l),s=(a(42),a(10)),i=a(6),u=a(11),m=a(8),d=a(7),h=a(9),p=(a(43),"https://rickandmortyapi.com/api/character"),f="".concat(n="http://ec2-3-19-58-232.us-east-2.compute.amazonaws.com","/favorites"),g="".concat(n,"/user"),v="".concat(n,"/users/me/token"),b="".concat(n,"/user/login"),E=1500,C=["human","alien","humanoid","unknown","poopybutthole","mytholog","robot","disease","cronenberg","parasite","animal","vampire"],S=["alive","dead","unknown"],k=function(e,t,a){var n=Math.ceil(a/2);return e<n?0:e>t-Math.floor(a/2)?t-a:e-n},x=function(e){var t=e.handleFilterChange;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,o.a.createElement("select",{id:"species",onChange:t},o.a.createElement("option",{key:"-100",value:"-----"},"-- Filter By Species --"),C.map(function(e,t){return o.a.createElement("option",{key:t,value:e},e)}),"}")),o.a.createElement("div",null,o.a.createElement("select",{id:"status",onChange:t},o.a.createElement("option",{key:"-100",value:"-----"},"-- Filter By Status --"),S.map(function(e,t){return o.a.createElement("option",{key:t,value:e},e)}))))},y=a(3),w=a(4);function N(){var e=Object(y.a)(["\n  text-align: center;\n"]);return N=function(){return e},e}function j(){var e=Object(y.a)(["\n  background: #abd5ec;\n  border-color: #abd5ec;\n  border-radius: 8px;\n  outline: none;\n  margin: 0 auto;\n  -webkit-appearance: none;\n  outline: none;\n  margin: 0 5px;\n"]);return j=function(){return e},e}function O(){var e=Object(y.a)(["\n  margin: 15px;\n"]);return O=function(){return e},e}function F(){var e=Object(y.a)(["\n  background: #abd5ec;\n  border-color: #abd5ec;\n  border-radius: 8px;\n  outline: none;\n  margin: 0 5px;\n  -webkit-appearance: none;\n  outline: none;\n"]);return F=function(){return e},e}var I=w.a.button(F()),M=w.a.div(O()),P=w.a.button(j()),T=w.a.div(N()),U=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.handleNextClick,a=e.handlePrevClick,n=e.page,r=e.maxPages,l=e.handlePageNumberClick,c=e.handleFilterChange,i=e.currentFilter,u=e.userFavorites,m=Object(s.a)(Array(r)).map(function(e,t){return o.a.createElement(I,{key:t,id:t,onClick:l,className:n===t+1?"current":""},t+1)}).splice(k(n,r,5),5);return u?o.a.createElement("div",{style:{textAlign:"center"}},o.a.createElement("a",{href:"/",className:"btn btn-secondary"},"Back to main page")):o.a.createElement(T,{className:"container page"},i?null:o.a.createElement("p",null,o.a.createElement("strong",null,"page:")," ",n,"/",r),i?o.a.createElement("span",{className:"filter"},o.a.createElement("strong",null,"Filtering By: ")," ",o.a.createElement("span",{className:i.toLowerCase()},i.toUpperCase())):null,o.a.createElement(x,{handleFilterChange:c}),i?null:o.a.createElement(M,null,m),1===n||i?null:o.a.createElement(P,{onClick:a},"back"),n===r||i?null:o.a.createElement(P,{onClick:t},"next"))}}]),t}(r.Component),B=a(14),L=a(15),_=a(2),D=a.n(_),J={headers:{"Content-type":"application/json"}},A=function(e,t,a,n){return D.a.post(g,{firstname:e,lastname:t,email:a,password:n},J).then(function(e){return e})},G=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).onOpenModal=function(){a.setState({open:!0})},a.onCloseModal=function(){a.setState({open:!1})},a.onChange=function(e){return a.setState(Object(B.a)({},e.target.name,e.target.value))},a.onSubmit=function(e){e.preventDefault();var t=a.state,n=t.firstname,r=t.lastname,o=t.email,l=t.password;A(n,r,o,l).then(function(e){var t=e.headers;localStorage.setItem("firstname",n),localStorage.setItem("x-auth",t["x-auth"]),window.location.reload()})},a.state={open:!1,firstname:"",lastname:"",email:"",password:""},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.open,a=e.firstname,n=e.lastname,r=e.email,l=e.password;return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{onClick:this.onOpenModal,className:"btn btn-light signup"},"Sign Up"),o.a.createElement(L.a,{open:t,onClose:this.onCloseModal,center:!0},o.a.createElement("h5",{className:"modal-title"},"Sign Up"),o.a.createElement("div",{className:"modal-body"},o.a.createElement("form",{action:"localhost:4000/user",method:"POST",onSubmit:this.onSubmit},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"firstname"},"First Name"),o.a.createElement("input",{type:"text",name:"firstname",value:a,placeholder:"First Name",className:"form-control",onChange:this.onChange})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"lastname"},"Last Name"),o.a.createElement("input",{type:"text",name:"lastname",value:n,placeholder:"Last Name",className:"form-control",onChange:this.onChange})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"email"},"Email"),o.a.createElement("input",{type:"email",name:"email",value:r,className:"form-control",placeholder:"example@example.com",onChange:this.onChange})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"password"},"Password"),o.a.createElement("input",{type:"password",name:"password",value:l,className:"form-control",placeholder:"password",autoComplete:"on",onChange:this.onChange})),o.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"submit"})))))}}]),t}(o.a.Component),z={headers:{"Content-type":"application/json","x-auth":localStorage.getItem("x-auth")}},W=function(){return D.a.delete(v,z).then(function(e){200===e.status&&(localStorage.removeItem("x-auth"),localStorage.removeItem("firstname"),window.location.reload())})},R=function(e,t){return D.a.post(b,{email:e,password:t},z).then(function(e){return e})},V=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).onOpenModal=function(){a.setState({open:!0})},a.onCloseModal=function(){a.setState({open:!1})},a.onChange=function(e){return a.setState(Object(B.a)({},e.target.name,e.target.value))},a.onSubmit=function(e){e.preventDefault();var t=a.state,n=t.email,r=t.password;R(n,r).then(function(e){var t=e.headers,a=e.data;localStorage.setItem("x-auth",t["x-auth"]),localStorage.setItem("firstname",a.firstname),window.location.reload()}),a.setState({email:"",password:"",open:!1})},a.state={open:!1,email:"",password:"",firstname:""},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.open,a=e.email,n=e.password;return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{onClick:this.onOpenModal,className:"btn btn-info signin"},"Sign In"),o.a.createElement(L.a,{open:t,onClose:this.onCloseModal,center:!0},o.a.createElement("h5",{className:"modal-title"},"Sign In"),o.a.createElement("div",{className:"modal-body"},o.a.createElement("form",{action:"localhost:4000/user/signin",method:"POST",onSubmit:this.onSubmit},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"email"},"Email"),o.a.createElement("input",{type:"email",name:"email",value:a,className:"form-control",placeholder:"example@example.com",onChange:this.onChange})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"password"},"Password"),o.a.createElement("input",{type:"password",name:"password",value:n,className:"form-control",placeholder:"password",autoComplete:"on",onChange:this.onChange})),o.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"submit"})))))}}]),t}(o.a.Component);function $(){var e=Object(y.a)(["\n  color: white;\n  margin-right: 20px;\n  margin-left: 20px;\n  justify-content: center;\n  display: flex;\n  align-items: center;\n"]);return $=function(){return e},e}var q=w.a.span($()),H=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).handleSignOut=function(e){e.preventDefault(),W()},a.render=function(){var e=a.props.handleGetFavorites;return o.a.createElement(o.a.Fragment,null,o.a.createElement("nav",{className:"navbar navbar-expand-sm navbar-dark mb-3 py-0",style:{background:"url(https://2static.fjcdn.com/large/pictures/e9/95/e995f5_5964659.jpg)",backgroundPosition:"50% 40%",backgroundSize:"cover"}},o.a.createElement("div",{className:"container",style:{zIndex:1}},o.a.createElement("a",{href:"/",className:"navbar-brand"},o.a.createElement("img",{src:"/logo.png",alt:"logo"}),a.state.name),o.a.createElement("div",{className:"navbar-nav ml-auto"},localStorage.getItem("x-auth")?o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{onClick:e,className:"btn btn-primary"},"View Favorites"),o.a.createElement(q,null,"Welcome ",localStorage.getItem("firstname"),"!"),o.a.createElement("button",{onClick:a.handleSignOut,className:"btn btn-light"},"Logout")):o.a.createElement(o.a.Fragment,null,o.a.createElement(G,null),o.a.createElement(V,null))))))},a.state={name:"The App"},a}return Object(h.a)(t,e),t}(r.Component);function K(){var e=Object(y.a)(["\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: space-around;\n"]);return K=function(){return e},e}function Q(){var e=Object(y.a)(["\n  width: 31%;\n  padding: 10px;\n  margin: 30px 0;\n  text-align: center;\n  @media (max-width: 992px) {\n    width: 50%;\n  }\n  @media (max-width: 767px) {\n    width: 100%;\n  }\n"]);return Q=function(){return e},e}function X(){var e=Object(y.a)(["\n  height: auto;\n  background: #f1f1fa;\n  max-width: 400px;\n  width: 100%;\n  display: block;\n  margin: 0 auto;\n  border: 0;\n"]);return X=function(){return e},e}var Y=w.a.img(X()),Z=w.a.div(Q()),ee=w.a.div(K());function te(){var e=Object(y.a)(["\n  color: skyblue;\n  cursor: pointer;\n"]);return te=function(){return e},e}var ae=w.a.i(te()),ne=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).render=function(){var e=a.props,t=e.characterName,n=e.characterBody,r=e.favoritedItems,l=e.handleFavoriteClick,c=e.handleUnfavoriteClick,s=r.map(function(e){return e.name}),i=function(e){a.state.liked||s.includes(e.name)?(console.log(e),localStorage.getItem("x-auth")&&a.setState({liked:!1}),c(e)):(localStorage.getItem("x-auth")&&a.setState({liked:!0}),l(e))};return o.a.createElement("div",null,s.includes(t)||a.state.liked?o.a.createElement(ae,{className:"fas fa-star fa-2x",onClick:function(){return i(n)}}):o.a.createElement(ae,{className:"far fa-star fa-2x",onClick:function(){return i(n)}}))},a.state={liked:!1},a}return Object(h.a)(t,e),t}(r.Component),re=function(e){var t=e.data,a=e.handleFavoriteClick,n=e.handleUnfavoriteClick,r=e.favoritedItems;return o.a.createElement(ee,{className:"container"},t&&t.map(function(e){return o.a.createElement(Z,{key:e._id?e._id:e.id,className:"card"},o.a.createElement("span",{className:"star"},o.a.createElement(ne,{characterName:e.name,characterBody:e,favoritedItems:r,handleUnfavoriteClick:n,handleFavoriteClick:a})),o.a.createElement(Y,{src:e.image,alt:e.image}),o.a.createElement("h1",null,e.name),o.a.createElement("p",null,"Status:"," ",o.a.createElement("span",{className:"".concat(e.status.toLowerCase()," status")},e.status)),o.a.createElement("p",{className:"species"},"Species:"," ",o.a.createElement("span",{className:e.species.toLowerCase()},e.species)))}))},oe=function(e){var t=e.errorMessage,a=e.successMessage;return o.a.createElement("div",null,t?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"alert alert-danger fade show",role:"alert"},t)):null,a?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"alert alert-success fade show",role:"alert"},a)):null)},le={headers:{"Content-type":"application/json"}},ce=function(e){var t="".concat(p,"?page=").concat(e);return D.a.get(t,le).then(function(e){var t=e.data;return{results:t.results,info:t.info}})},se=function e(t,a){return D.a.get(t).then(function(t){var n=t.data,r=n.results,o=n.info;if(o.next){var l=a.concat(r);return e(o.next,l)}return a=Object(s.a)(a.concat(r)),localStorage.setItem("results",JSON.stringify(a)),a})},ie=function(e){var t={headers:{"Content-type":"application/json","x-auth":localStorage.getItem("x-auth")}},a=e.status,n=e.species,r=e.name,o=e.image;return D.a.post(f,{status:a,species:n,name:r,image:o},t)},ue={headers:{"Content-type":"application/json","x-auth":localStorage.getItem("x-auth")}},me=function(){return D.a.get(f,ue).then(function(e){return e.data.favorite})},de={headers:{"Content-type":"application/json","x-auth":localStorage.getItem("x-auth")}},he=function(e){return D.a.delete("".concat(f,"/").concat(e),de).then(function(e){return e.data.favorite})},pe=localStorage.getItem("results"),fe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).handleNextClick=function(){var e=a.state.page;a.setState({page:e+1,loading:!0,currentFilter:""})},a.handlePrevClick=function(){var e=a.state.page;a.setState({page:e-1,loading:!0,currentFilter:""})},a.handlePageNumberClick=function(e){a.setState({page:Number(e.target.id)+1,loading:!0})},a.handleFilterChange=function(e){var t=e.target.value,n=e.target.id;a.setState({loading:!0,currentFilter:t},function(){setTimeout(function(){localStorage.getItem("results")?a.setState({characters:JSON.parse(pe).filter(function(e){return e[n].toLowerCase()===t}),loading:!1}):se(p,[]).then(function(e){a.setState({characters:e.filter(function(e){return e[n].toLowerCase()===t}),loading:!1})})},E)})},a.handleFavoriteClick=function(e){var t=a.state.favoritedItems;ie(e).then(function(n){localStorage.getItem("x-auth")&&a.setState({successMessage:"Success! ".concat(e.name," favorited."),favoritedItems:Object(s.a)(t).concat(n.data)},function(){setTimeout(function(){a.setState({successMessage:null})},E)})}).catch(function(e){var t=e.response,n=t.status,r=t.statusText;401===n?a.setState({errorMessage:"".concat(r,": Sign in or sign up to view favorites!")},function(){setTimeout(function(){a.setState({errorMessage:null})},E)}):a.setState({errorMessage:"".concat(r,": Already favorited this item!")},function(){setTimeout(function(){a.setState({errorMessage:null})},E)})})},a.handleUnfavoriteClick=function(e){var t=a.state.favoritedItems,n=t.map(function(e){return{_id:e._id,name:e.name}});if(n.map(function(e){return e.name}).includes(e.name)){var r=n.findIndex(function(t){return t.name===e.name}),o=n[r]._id;he(o).then(function(n){a.setState({successMessage:"Success! ".concat(e.name," deleted."),favoritedItems:Object(s.a)(t.filter(function(e){return e._id!==o}))},function(){setTimeout(function(){a.setState({successMessage:""})},E)})}).catch(function(t){a.setState({errorMessage:"Error! ".concat(e.name," not deleted. ").concat(t)},function(){setTimeout(function(){a.setState({errorMessage:""})},E)})})}},a.handleGetFavorites=function(){var e=a.state.favoritedItems;a.setState({loading:!0},function(){setTimeout(function(){a.setState({characters:Object(s.a)(e),loading:!1,userFavorites:!0})},E)})},a.state={characters:[],favoritedItems:[],page:1,maxPages:0,loading:!0,currentFilter:null,userFavorites:!1,errorMessage:null,successMessage:null},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.page;ce(t).then(function(t){var a=t.results,n=t.info;e.setState({characters:a,maxPages:n.pages,loading:!1})}),localStorage.getItem("x-auth")&&me().then(function(t){e.setState({favoritedItems:Object(s.a)(t)})})}},{key:"componentDidUpdate",value:function(e,t){var a=this;if(this.state.page!==t.page){var n=this.state.page;ce(n).then(function(e){var t=e.results,n=e.info;a.setState({characters:t,maxPages:n.pages,loading:!1})})}}},{key:"render",value:function(){var e=this.state,t=e.characters,a=e.page,n=e.maxPages,r=e.loading,l=e.currentFilter,c=e.errorMessage,s=e.successMessage,i=e.userFavorites,u=e.favoritedItems;return o.a.createElement("div",null,o.a.createElement(H,{handleGetFavorites:this.handleGetFavorites}),r?o.a.createElement("div",{className:"d-flex justify-content-center"},o.a.createElement("div",{className:"spinner-border text-primary",style:{width:"8rem",height:"8rem"},role:"status"},o.a.createElement("span",{className:"sr-only"},"Loading..."))):o.a.createElement(o.a.Fragment,null,o.a.createElement(oe,{errorMessage:c,successMessage:s}),o.a.createElement(U,{handleNextClick:this.handleNextClick,handlePrevClick:this.handlePrevClick,handlePageNumberClick:this.handlePageNumberClick,page:a,maxPages:n,handleFilterChange:this.handleFilterChange,currentFilter:l,userFavorites:i}),o.a.createElement(re,{data:t,favoritedItems:u,handleFavoriteClick:this.handleFavoriteClick,handleUnfavoriteClick:this.handleUnfavoriteClick})),o.a.createElement("footer",null,o.a.createElement("div",{className:"footer-copyright text-center py-3"},"Created using ReactJS by"," ",o.a.createElement("a",{href:"mailto:connorwbarley@gmail.com"},"Connor Barley"))))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(fe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[36,1,2]]]);
//# sourceMappingURL=main.08812de2.chunk.js.map